# CCTools 插件开发规范

## 1. 文件夹结构

```
cctools/                    # 主目录
├── __init__.py            # 插件入口文件
├── operators/             # 操作类文件夹
│   ├── __init__.py       # 操作类注册
│   ├── uv_rename.py      # UV重命名功能
│   ├── uv_copy.py        # UV复制功能
│   └── uv_merge.py       # UV合并功能
├── panels/                # 界面面板文件夹
│   ├── __init__.py       # 面板类注册
│   └── uv_panels.py      # UV相关面板
└── utils/                 # 工具函数文件夹
    ├── __init__.py       # 工具函数注册
    └── uv_utils.py       # UV相关工具函数
```

## 2. 命名规范

### 2.1 类命名
- 所有类名以`CCTOOLS_`开头
- 操作类使用`OT_`前缀，如：`CCTOOLS_OT_rename_uv_maps`
- 面板类使用`PT_`前缀，如：`CCTOOLS_PT_uv_tools`
- 工具类使用`UT_`前缀，如：`CCTOOLS_UT_uv_helper`

### 2.2 文件命名
- 全部小写
- 使用下划线分隔单词
- 按功能类型分类，如：`uv_rename.py`, `model_clean.py`

### 2.3 变量命名
- 使用小写字母
- 使用下划线分隔单词
- 描述性命名，如：`processed_count`, `uv_layers`

### 2.4 常量命名
- 全部大写
- 使用下划线分隔单词
- 如：`MAX_UV_COUNT`, `DEFAULT_PREFIX`

## 3. 功能组织

### 3.1 功能分类
- UV工具：处理UV相关操作
- 模型工具：处理模型相关操作
- 材质工具：处理材质相关操作
- 动画工具：处理动画相关操作

### 3.2 文件组织
- 每个主要功能一个独立文件
- 相关功能放在同一个文件夹下
- 通用功能放在utils文件夹

### 3.3 面板组织
- 主面板作为功能分类入口
- 子面板包含具体功能
- 相关功能放在同一个子面板下

## 4. 代码规范

### 4.1 文件结构
- 文件顶部：必要的导入语句
- 类定义：主要功能类
- 辅助函数：工具函数
- 注册函数：register/unregister

### 4.2 注释规范
- 类注释：说明类的功能和用途
- 函数注释：说明参数和返回值
- 关键代码注释：说明实现逻辑

### 4.3 错误处理
- 使用try-except处理可能的错误
- 使用self.report()报告错误信息
- 返回合适的操作状态

## 5. 开发流程

### 5.1 新功能添加
1. 在appropriate文件夹创建新文件
2. 在__init__.py中注册新模块
3. 实现功能类和面板类
4. 测试新功能

### 5.2 代码提交
1. 确保代码符合规范
2. 测试功能正常
3. 更新文档
4. 提交代码

## 6. 文档维护

### 6.1 代码文档
- 每个文件头部添加功能说明
- 关键函数添加详细注释
- 复杂逻辑添加实现说明

### 6.2 用户文档
- 功能使用说明
- 常见问题解答
- 示例演示

## 7. 版本控制规范

### 7.1 版本号管理
- 使用语义化版本号(Semantic Versioning)
- 格式：主版本号.次版本号.修订号
- 重大更新增加主版本号
- 新功能更新增加次版本号
- Bug修复增加修订号

### 7.2 分支管理
- main: 主分支，保持稳定
- develop: 开发分支
- feature/*: 新功能分支
- bugfix/*: 错误修复分支
- release/*: 发布分支

## 8. bl_info 配置规范

### 8.1 必填字段
- name: 插件名称
- author: 作者信息
- version: 版本号元组
- blender: 支持的Blender版本
- location: 功能位置
- description: 功能描述
- category: 插件分类

### 8.2 可选字段
- warning: 警告信息
- doc_url: 文档链接
- tracker_url: 问题追踪链接
- support: 支持级别

## 9. 国际化规范

### 9.1 文本处理
- 所有用户界面文本使用bpy.app.translations
- 使用英文作为基础语言
- 支持中文本地化
- 文本存储在独立的语言文件中

### 9.2 翻译文件
- 使用.po格式存储翻译
- 按语言代码命名文件
- 保持翻译文件的同步更新

## 10. 测试规范

### 10.1 单元测试
- 为核心功能编写单元测试
- 使用unittest框架
- 测试文件放在tests目录
- 测试覆盖主要功能点

### 10.2 集成测试
- 测试功能间的交互
- 测试UI操作流程
- 测试数据导入导出
- 测试性能指标

## 11. 性能优化规范

### 11.1 代码优化
- 避免不必要的循环
- 使用适当的数据结构
- 减少内存占用
- 优化算法复杂度

### 11.2 资源管理
- 及时释放不需要的资源
- 使用上下文管理器
- 避免内存泄漏
- 控制临时对象的生命周期

## 12. UI设计规范

### 12.1 布局设计
- 保持界面整洁
- 相关功能组织在一起
- 使用适当的间距
- 保持视觉层次

### 12.2 交互设计
- 提供清晰的操作反馈
- 添加操作确认机制
- 支持快捷键操作
- 提供进度显示

### 12.3 视觉设计
- 遵循Blender的视觉风格
- 使用一致的图标
- 合理使用颜色
- 保持文字可读性 